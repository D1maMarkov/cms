{% extends "common/base.html" %}
{% load static %}


{% block title %}
    Войти в аккаунт
{% endblock %}

{% block additional_styles %}
    <link rel="stylesheet" href="{% static 'user/css/main.css' %}">
{% endblock %}


{% block content %}

<form action="/user/login" method="post" class="user-form">
    <img class="logo" src="{{ settings.form_logo.image }}" />

    <h3>Вход в кабинет</h3>

    {% csrf_token %}
    {% for field in form %}
        <div class="field" id="{{ field.name }}">
            {{ field }}
            {% for error in field.errors %}
                <div class="error">{{ error }}</div>
            {% endfor %}
        </div>
    {% endfor %}
    <input type="submit" disabled value="Войти в кабинет" />

    <div class="bottom-menu">
        <label class="agreed-container">Запомнить меня
            <input type="checkbox">
            <span class="checkmark"></span>
        </label>

        <a class="forget-password">Забыли пароль?</a>
    </div>

    <p class="already-register">Ещё не зарегистрированы?</p>
    <a href="/user/register" class="login">Создать кабинет</a>
</form>

<style>
    .logo{
        width: {{settings.form_logo.width}};
        height: {{settings.form_logo.height}};
    }
</style>


<script src="{% static "user/js/validators/password_validator.js" %}"></script>
<script src="{% static "user/js/validators/email_validator.js" %}"></script>
<script src="{% static "user/js/validators/username_validator.js" %}"></script>
<script src="{% static "user/js/validators/phone_validator.js" %}"></script>
<script src="{% static "user/js/login_form.js" %}"></script>
<script src="{% static "user/js/token.js" %}"></script>
<script>
    const token = "{{acess_token}}";
    if (token !== ""){
        setToken(token);
        window.location.replace("/user/profile")
    }
</script>
{% endblock %}
